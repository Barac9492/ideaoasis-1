{% extends "base.html" %}

{% block title %}아이디어 아카이브 - IdeaOasis{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero">
    <h1>아이디어 아카이브</h1>
    <p>과거에 발굴된 모든 창업 아이디어를 둘러보세요</p>
</section>

<!-- Main Content -->
<div class="main-content">
    {% if ideas %}
        <!-- Archive Header -->
        <div style="margin-bottom: 3rem;">
            <h2 style="margin-bottom: 0.5rem;">발굴된 아이디어들</h2>
            <p style="color: #666; font-size: 1rem;">총 {{ ideas|length }}개의 아이디어가 있습니다</p>
        </div>

        <!-- Ideas Grid -->
        <div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 2rem;">
            {% for idea in ideas %}
            <div class="idea-card">
                {% if demo_mode %}
                    <div class="demo-badge">DEMO MODE</div>
                {% endif %}
                
                <!-- Meta Information -->
                <div class="meta">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <p style="margin-bottom: 0.5rem;">{{ idea.published_at.strftime('%Y년 %m월 %d일') }}</p>
                            <p style="margin-bottom: 0;">출처: {{ idea.source_type.upper() }}</p>
                        </div>
                        <div class="tags">
                            <span class="tag primary">{{ idea.source_type.upper() }}</span>
                            {% if idea.category %}
                            <span class="tag success">{{ idea.category.upper() }}</span>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- Idea Title -->
                <h3 style="margin-bottom: 1rem;">{{ idea.idea_title }}</h3>

                <!-- Idea Preview -->
                <div class="idea-preview">
                    {{ idea.summary_kr[:300] }}...
                </div>

                <!-- Action Buttons -->
                <div style="display: flex; justify-content: space-between; align-items: center; padding-top: 1.5rem; border-top: 1px solid #f0f0f0;">
                    <a 
                        href="{{ idea.source_url }}" 
                        target="_blank" 
                        rel="noopener noreferrer"
                        class="btn btn-secondary"
                        style="padding: 0.5rem 1rem; font-size: 0.875rem;"
                    >
                        <span>원문 보기</span>
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                            <polyline points="15 3 21 3 21 9"></polyline>
                            <line x1="10" y1="14" x2="21" y2="3"></line>
                        </svg>
                    </a>
                    
                    <div class="vote-buttons" style="gap: 0.5rem;">
                        <button 
                            onclick="vote({{ idea.id }}, 'up')"
                            class="vote-btn up"
                            style="padding: 0.375rem 0.75rem; font-size: 0.875rem;"
                        >
                            <span>👍</span>
                            <span id="upvotes-{{ idea.id }}">0</span>
                        </button>
                        <button 
                            onclick="vote({{ idea.id }}, 'down')"
                            class="vote-btn down"
                            style="padding: 0.375rem 0.75rem; font-size: 0.875rem;"
                        >
                            <span>👎</span>
                            <span id="downvotes-{{ idea.id }}">0</span>
                        </button>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>

    {% else %}
        <!-- No Ideas Available -->
        <div class="card" style="text-align: center; padding: 4rem 2rem;">
            <h2 style="margin-bottom: 2rem;">아직 아카이브된 아이디어가 없습니다</h2>
            <p style="margin-bottom: 3rem;">
                매일 새로운 아이디어가 발굴되면 여기에 저장됩니다.<br>
                잠시 후 다시 확인해보세요.
            </p>
            <div style="display: flex; justify-content: center; gap: 1rem;">
                <a href="/" class="btn btn-primary">
                    홈으로 돌아가기
                </a>
                <button 
                    onclick="location.reload()"
                    class="btn btn-secondary"
                >
                    새로고침
                </button>
            </div>
        </div>
    {% endif %}

    <!-- Call to Action -->
    <div class="cta">
        <h2>더 많은 아이디어를 원하시나요?</h2>
        <p>
            매일 새로운 해외 아이디어로 창업 영감을 얻어보세요
        </p>
        <a href="/" class="btn">
            오늘의 아이디어 보기
        </a>
    </div>
</div>
{% endblock %} 